{% load i18n dac crispy_forms_tags %}

<c-dac.allauth.mfa title="{% trans "Activate Authenticator App" %}">
  <c-card help_text="{% trans "To protect your account with two-factor authentication, scan the QR code below with your authenticator app. Then, input the verification code generated by the app below." %}">
    {% url 'mfa_activate_totp' as action_url %}
    <form id="mfaForm"
          method="post"
          action="{{ action_url }}">
      {% csrf_token %}
      <!-- QR Code Section -->
      <img src="{{ totp_svg_data_uri }}"
           alt="{{ form.secret }}"
           class="w-48 h-48 mx-auto" />
      <!-- Secret Key Section -->
      <div class="mb-6">
        <label for="authenticator_secret"
               class="block text-sm font-medium text-gray-700 mb-2">{% trans "Authenticator secret" %}</label>
        <input type="text"
               id="authenticator_secret"
               value="{{ form.secret }}"
               disabled
               class="w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500 font-mono text-sm" />
      </div>
      <p>{% trans "You can store this secret and use it to reinstall your authenticator app at a later time." %}</p>
      {{ form.code|as_crispy_field }}
    </form>
    <c-slot name="actions">
      <c-button type="submit"
                form="mfaForm"
                text="{% trans "Activate" %}" />
    </c-slot>
  </c-card>
</c-dac.allauth.mfa>
