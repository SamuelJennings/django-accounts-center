{% load static i18n dac %}

<c-dac.page title="{% trans "Email Addresses" %}">
  <c-dac.card title="{% trans "Email Addresses" %}">
    {% if emailaddresses %}
      <c-dac.card.text text="{% trans "The following email addresses are associated with your account:" %}" />
      {% comment %} This is a custom component to the allauth addon {% endcomment %}
      <c-dac.manage-email-group :emails="emailaddress_radios" />
    {% else %}
      {% include "account/snippets/warn_no_email.html" %}
    {% endif %}
  </c-dac.card>
  {% if can_add_email %}
    <c-dac.card title="{% trans "Add Email Address" %}"
                help_text="">
      <c-dac.form id="addEmailForm"
                  action="{% url "account_email" %}"
                  :form="form" />
      <c-slot name="actions">
        <c-dac.action type="submit"
                      form="addEmailForm"
                      name="action_add"
                      text="{% trans "Add Email" %}" />
      </c-slot>
    </c-dac.card>
  {% endif %}
  <!-- Alpine.js for dropdown functionality -->
  <script defer
          src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script src="{% static "account/js/account.js" %}"></script>
  <script src="{% static "account/js/onload.js" %}"></script>
  <script data-allauth-onload="allauth.account.forms.manageEmailForm" type="application/json">
    {
      "i18n": {
        "confirmDelete": "{% trans "Do you really want to remove the selected email address?" %}"
      }
    }
  </script>
  <style>
    [x-cloak] {
      display: none !important;
    }

    /* Ensure dropdown appears above other elements */
    .dropdown-menu {
      position: absolute !important;
      z-index: 9999 !important;
      background: white !important;
      border: 1px solid #e5e7eb !important;
      border-radius: 0.375rem !important;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05) !important;
    }

    /* Ensure all card-related components don't clip dropdowns */
    .c-dac-card,
    .c-dac-card>*,
    [class*="c-dac"],
    [class*="card"] {
      overflow: visible !important;
    }

    /* Specific overrides for common clipping elements */
    .border,
    .rounded-md,
    .mt-4 {
      overflow: visible !important;
    }

    /* Force the dropdown to appear on top of everything */
    .dropdown-container {
      position: static !important;
    }
  </style>
</c-dac.page>
