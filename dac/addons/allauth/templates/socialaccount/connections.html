{% extends "socialaccount/base_manage.html" %}
{% load i18n allauth %}

{% block content %}
  <c-dac.title text="{% trans "Connected Accounts" %}" />
  {% if form.accounts %}
    <c-dac.text text="{% trans "You can sign in to your account using any of the following third-party accounts:" %}" />
    {% url 'socialaccount_connections' as action_url %}
    <form action="{{ action_url }}" method="post">
      {% csrf_token %}
      {% for acc in form.fields.account.choices %}
        {% with account=acc.0.instance.get_provider_account %}
          {% setvar radio_id %}
          id_account_{{ account.account.pk }}
        {% endsetvar %}
        {% setvar tags %}
        socialaccount,{{ account.account.provider }}
      {% endsetvar %}
      {% element field id=radio_id type="radio" name="account" value=account.account.pk %}
      {% slot label %}
      {{ account }}
      {% element badge tags=tags %}
      {{ account.get_brand.name }}
    {% endelement %}
  {% endslot %}
{% endelement %}
{% endwith %}
{% endfor %}
<c-dac.action style="primary"
              style="danger"
              type="submit"
              text="{% trans "Remove" %}" />
</form>
{% else %}
<c-dac.text text="{% trans "You currently have no third-party accounts connected to this account." %}" />
{% endif %}
<c-dac.card title="{% trans "Add a Third-Party Account" %}"
            help_text="{% trans "After connecting your account, you will be able to login with the connected service." %}">
  {% include "socialaccount/snippets/provider_list.html" with process="connect" %}
  {% include "socialaccount/snippets/login_extra.html" %}
</c-dac.card>
{% endblock content %}
